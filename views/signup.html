{% extends "layout.html" %}

{% block body %}
	<div style="min-height: 500px;width: 40%;border: 1px solid #000;margin: 0 auto;">
		<h3>注册我的博客帐号</h3>
		<form action="signup" method="post">
			<div class="form-group">
			<label for="exampleInputEmail1">我的帐号</label>
			<input type="text" name="username" placeholder="username" class="form-control" id="users" value="">
			<p id="accounts" style="color: red"></p>
		</div>
		<div class="form-group">
			<label for="exampleInputPassword1">我的密码</label>
			<input type="password" name="password" placeholder="password" class="form-control" id="exampleInputPassword1">
		</div>
		<div class="form-group">
			<label for="exampleInputPassword1">确认密码</label>
			<input type="password" name="password1" placeholder="password" class="form-control">
		</div>
		<div class="form-group">
			<label for="exampleInputEmail1">我的邮箱</label>
			<input type="email" name="email" placeholder="email" class="form-control">
		</div>
		<div class="form-group">
			<label for="exampleInputEmail1">我的电话</label>
			<input type="text" name="phone" placeholder="phone" class="form-control" id="phones">
			<p id="phone1" style="color: red;"></p>
		</div>
		<div class="input-group-addon">
			<img src='"data:image/jpeg;base64,"+captcha' alt="验证码">
		</div>
		  <button type="submit" class="btn btn-default" style="margin: 0 auto">Submit</button>
		</form>
		<script>
			function getLength(str){
				return str.replace(/[\u4e00-\u9fa5]/g,"ok").length;
			}
			function show(obj){
				obj.style.display = "block";
			}
			function hide(obj){
				obj.style.style = "none";
			}
			var oUserInput = document.getElementById("users");
			var oUser = document.getElementById("accounts");
			var oPhoneInput = document.getElementById("phones"); 
			var oPhone = document.getElementById("phone1");
			window.onload = function(){
				oUserInput.onblur = function(){
					var reg1 = /[a-z\u4e00-\u9fa50-9_]+/g;
					var reg2 = /^[0-9]+$/g;
					var sVal = oUserInput.value;
					if(getLength(oUserInput.value) > 14){
						show(oUser);
						oUser.innerHTML = "用户名不能超过7个汉字或14个字符";
					}else if(!reg1.test(sVal) || reg2.test(sVal)){
						show(oUser);
						oUser.innerHTML = "用户名仅支持中英文、数字、下划线且不能为纯数字";
					}else{
						console.log("ajax")
					}
				};
				oPhoneInput.onblur = function(){
					var reg3 = /1[34578][\d]{9}/g;
					var sVal = oPhoneInput.value;
					if(!reg3.test(sVal)){
						show(oPhone);
						oPhone.innerHTML = "手机号码格式不正确";
					}else{
						console.log("ajax")
					}
				}
			}
			
		</script>
	</div>
{% endblock %}